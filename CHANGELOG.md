# 更新日志 (Changelog)

## v1.1.0 (2025-01-14)

### ✨ 新功能

#### 批量下载
- 新建下载对话框支持添加多个下载链接
- 点击"添加更多链接"按钮可动态添加 URL 输入框
- 每个额外的 URL 输入框都可以单独删除
- 批量下载时自动为每个链接创建独立的下载任务
- 显示批量下载提示："批量下载：已添加 X 个链接"

#### 预测性返回手势 (Android 13+)
- 支持系统级预测性返回手势,可在返回前预览动画
- 侧边栏支持预测性返回手势
- 搜索界面支持预测性返回手势
- 设置和许可页面支持预测性返回手势
- 对话框支持预测性返回手势

#### 状态栏沉浸式效果
- 实现 Edge-to-Edge 沉浸式显示
- 状态栏和导航栏完全透明
- 所有页面正确处理系统栏 insets,避免内容被遮挡
- 优化侧边栏的状态栏适配

#### 页面切换动画
- 主页、设置、许可页面之间的切换添加平滑的滑动动画
- 使用 Material Design 推荐的过渡效果
- 提升用户体验的流畅度

#### 多语言支持增强
- 下载对话框完全支持多语言
- "关于与许可"页面完全支持多语言
- 所有开源库描述支持多语言
- 新增字符串资源：
  - `add_more_links` - 添加更多链接
  - `batch_download_hint` - 批量下载提示
  - `filename_only_first` - 文件名仅应用于首个链接的说明
  - `open_source_licenses` - 开源许可
  - `using_open_source_projects` - 使用的开源项目说明
  - `thanks_to_contributors` - 致谢开源贡献者
  - 各开源库的描述字符串

### 🐛 Bug 修复

#### 导航栈问题修复
- 修复从设置/许可页面返回主页后,点击新建下载显示白屏的问题
- 优化导航逻辑,移除不必要的 `launchSingleTop` 标志
- 简化返回栈管理,使用 Navigation Compose 的默认行为

#### 重新下载功能修复
- **修复已完成任务无法重新下载的问题**
- 重新下载时会:
  - 删除已下载的文件
  - 清除所有分片记录
  - 重置下载进度数据
  - 重新初始化并启动下载
- 区分处理"失败任务重试"和"已完成任务重新下载"两种场景

#### 资源文件错误修复
- 修复 `open_source_licenses` 字符串在所有语言文件中重复定义的问题
- 修复 `lib_gson_desc` 中特殊字符导致的编译错误
- 修复 `getOpenSourceLibraries()` 函数缺少 `@Composable` 注解导致的编译错误

### 🔧 优化改进

#### UI/UX 优化
- 下载对话框宽度优化,设置为屏幕宽度的 92%
- 下载对话框支持自定义宽度,不使用平台默认宽度
- 对话框支持点击外部和返回键关闭

#### 代码质量
- 添加详细的日志输出,便于调试
- 优化错误处理逻辑
- 改进状态管理和数据流

### 📦 版本信息
- 版本号: `1.1.0`
- 版本代码: `2`
- 编译日期: 2025-01-14

### 🌐 支持的语言
- 简体中文 (zh-CN)
- 繁体中文 (zh-TW)
- English (en)
- 日本語 (ja)

---

## v1.0.0 (初始版本)

### 核心功能
- 多线程下载支持
- 断点续传
- 下载任务管理
- 自定义保存位置
- User-Agent 设置
- 剪贴板监听
- Firebase Analytics (可选)


